# Linux 

## 学习项目

实验5 环境变量与文件查找

1. 变量

```shell
[root@hadoop1 Desktop]# a=2
[root@hadoop1 Desktop]# echo a
a
[root@hadoop1 Desktop]# echo $a
2
```

​	使用$引用变量，否则会被当做字符串看待

  2. 环境变量

     1. 环境变量的作用域比自定义变量的要大，如 Shell 的环境变量作用于自身和它的子进程。Shell 程序也作为一个进程运行在操作系统之上，而我们在 Shell 中运行的大部分命令都将以 Shell 的子进程的方式运行

     2. 关于哪些变量是环境变量，可以简单地理解成在当前进程的子进程有效则为环境变量，否则不是。![此处输入图片的描述](https://doc.shiyanlou.com/document-uid735639labid60timestamp1532339293501.png/wm)

        

     4. 在 UNIX/Linux 中比较流行的常见的 Shell 有 bash、zsh、ksh、csh 等等，Ubuntu 终端默认使用的是 bash

     5. set 显示当前 Shell 所有变量，包括其内建环境变量（与 Shell 外观等相关），用户自定义变量比如tmp=3及导出的环境变量。

     5. export 显示从 Shell 中导出成环境变量的变量，也能通过它将自定义变量导出为环境变量。

     ```shell
     root@kvm:~# zhao=3
     root@kvm:~# export|grep zhao
     root@kvm:~# set|grep zhao
     zhao=3s
     ```

     6. 列出当前所有的环境变量 :`export -p`

     7. 定义环境变量并赋值：`export MYENV=7`
     8. 当你关机后，或者关闭当前的 shell 之后，环境变量就没了啊。怎么才能让环境变量对所有用户永久生效呢？写在配置文件/etc/profile里
     
3. 命令的查找路径

     1. 我们在 Shell 中输入一个命令，Shell 是怎么知道去哪找到这个命令然后执行的呢？这是通过环境变量 PATH 来进行搜索的
       2. 查看 PATH 环境变量的内容

```shell
$ echo $PATH
# 默认情况下你会看到如下输出
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games 
```

​		 3. PATH 里面的路径是以 : 作为分割符的，可以这样添加自定义路径：`$ PATH=$PATH:/home/newpath`

这样在/home/newpath中的脚本可以在任意目录运行了

​	 	4. 当给 PATH 环境变量追加了一个路径，它也只是在当前 Shell 有效，我一旦退出终端，再打开就会发现又失效了。在每个用户的 home 目录中有一个 Shell 每次启动时会默认执行一个配置脚本，以初始化环境，包括添加一些用户自定义环境变量等等。相应 Bash 的配置文件为 .bashrc。因此可以将3中的命令添加到.bashrc文件中。

​		5. 添加到配置文件后，每次都要退出终端重新打开甚至重启主机之后其才能生效，可以使用 source 命令来让其立即生效，它还有个别名是.。

```shell
$ cd /home/shiyanlou
$ source .bashrc
$ . ./.bashrc
#注意第一个点后面有一个空格，而且后面的文件必须指定完整的绝对或相对路径名，source 则不需要
```

4. 变量的修改和删除

     1. 为了避免操作失误导致命令找不到，我们先将 PATH 赋值给一个新的自定义变量 path

      2. ```shell
         root@kvm:/etc# path=$PATH
         root@kvm:/etc# echo $path
         /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/root/
         root@kvm:/etc# path=${path%~/}
         root@kvm:/etc# echo $path
         /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:
         ```

     3. ${变量名%匹配字串} ：从尾向前开始匹配，删除符合匹配字串的最短数据

     4. 可以使用 unset 命令删除一个环境变量

      5. ```shell
         root@kvm:/etc# unset path
         root@kvm:/etc# echo $path
         ```

5. 文件查找→1.find

```shell
[root@hadoop2 sources]# ll
total 892
-rw-r--r--. 1 root root      2 Aug 10 01:27 a0
-rw-r--r--. 1 root root      2 Aug 10 01:27 a1
-rw-r--r--. 1 root root      0 Aug 10 01:04 a1.txt
-rw-r--r--. 1 root root      2 Aug 10 01:27 a2
-rw-r--r--. 1 root root      0 Aug 10 01:04 a2.txt
-rw-r--r--. 1 root root      2 Aug 10 01:27 a3
-rw-r--r--. 1 root root      2 Aug 10 01:27 a4
-rw-r--r--. 1 root root      0 Aug 10 01:04 b1.txt
-rw-r--r--. 1 root root      0 Aug 10 01:04 b2.txt
-rw-r--r--. 1 root root      0 Aug 10 01:04 c1.txt
-rw-r--r--. 1 root root      0 Aug 10 01:04 c2.txt
-rw-r--r--. 1 root root      0 Aug 10 01:04 d1.txt
-rw-r--r--. 1 root root      0 Aug 10 01:04 d2.txt
-rw-r--r--. 1 root root  14237 Aug  5 05:57 hadoop-archives-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  11127 Aug  5 05:57 hadoop-archives-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root  16724 Aug  5 05:57 hadoop-datajoin-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  11733 Aug  5 05:57 hadoop-datajoin-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root  72293 Aug  5 05:57 hadoop-distcp-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  57949 Aug  5 05:57 hadoop-distcp-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root  35175 Aug  5 05:57 hadoop-extras-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  18411 Aug  5 05:57 hadoop-extras-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root 125817 Aug  5 05:57 hadoop-gridmix-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  76203 Aug  5 05:57 hadoop-gridmix-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root 174549 Aug  5 05:57 hadoop-rumen-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  13833 Aug  5 05:57 hadoop-rumen-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root  52035 Aug  5 05:57 hadoop-sls-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  22514 Aug  5 05:57 hadoop-sls-2.5.0-cdh5.2.0-test-sources.jar
-rw-r--r--. 1 root root  78495 Aug  5 05:57 hadoop-streaming-2.5.0-cdh5.2.0-sources.jar
-rw-r--r--. 1 root root  80681 Aug  5 05:57 hadoop-streaming-2.5.0-cdh5.2.0-test-sources.jar
[root@hadoop2 sources]# find . -name "[a-d]1.txt"
./a1.txt
./b1.txt
./c1.txt
./d1.txt
[root@hadoop2 sources]# find . -name "hadoop-archives-2.5.0-cdh5.2.0*"
./hadoop-archives-2.5.0-cdh5.2.0-test-sources.jar
./hadoop-archives-2.5.0-cdh5.2.0-sources.jar
```

6. 文件查找→2.which

```shell
root@ctl-1:~# find mysql
find: 'mysql': No such file or directory
root@ctl-1:~# which mysql
/usr/bin/mysql
```

## 第二日计划

完成挑战1：寻找文件

# Python

## 学习项目

实验4  控制流 If-else

1. 程序1

   1. ```python
      age = 20
      if age >= 6:
          print('teenager')
      elif age >= 18:
          print('adult')
      else:
          print('kid')
      ```

   2. 结果分析

      1. teenager  
      2. 条件语句只执行一个语句

2. 程序2

   1. ```python
      s = input('birth: ')
      birth = int(s)
      if birth < 2000:
          print('00前')
      else:
          print('00后')
      ```

   2. 解决bug

      1. 因为input()返回的数据类型是str，str不能直接和整数比较，必须先把str转换成整数。
      2. Python提供了int()函数来完成这件事情，注意，int()发现一个字符串并不是合法的数字时就会报错，如abc

## 第二日计划

完成 实验5  循环