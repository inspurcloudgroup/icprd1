# Git与Github
## 多人协作Github部分
### 1、创建仓库
创建时注意两个下拉框：
* 忽略文件下拉框：我们在写代码时，总会出现一些不需要上传到仓库的垃圾文件、缓存文件、备份文件、环境文件等等，可以创建一个忽略文件将这些不需要被上传到远程仓库的文件忽略掉。忽略文件的名字是 .gitignore，它被放置在仓库主目录下，将不需上传的文件的名字写入其中，Git 就会自动忽略它们。
![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1079991-20190530-1559215287625)
可以选择语言或系统等的开发项目。若创建时忘记选择，可以在https://github.com/github/gitignore中选择自己需要的忽略文件添加到仓库里。
* 关于开源许可证

对下图中三个按钮的说明：
![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1079991-20190530-1559215893465)
Watch：这是一个下拉按钮，可以选择对此仓库关注、不关注、忽略等。

Star：如果觉得这个仓库很好，就点击这个按钮送一颗星，仓库获得的星越多表示该项目越优秀。

Fork：在别人的仓库中点此按钮会克隆一个完全一样的仓库到你自己的账号中，包括所有分支、提交等，但不会克隆 issue，当此仓库发生版本变化，不会自动同步到你克隆的仓库里，反之亦然。
### 2、增加合作者
网页上点击`Settings->Collaborators`，在输入框中输入组员github账号的用户名，组员收到邮件并接受，可点击`fork`克隆组长的仓库到组员的账号中。
### 3、添加issue
组长在仓库中可添加一些项目任务或待解决问题，即为issue，可以指派一位或多位项目参与者完成，同样会发送邮件。当然，组员也可以提交issue。
## 多人协作Git部分
### 1、克隆仓库到本地
使用`git clone`命令克隆仓库到本地即可。
### 2、完成任务并推送到自己的仓库
对于组长给定的issue，创建后会生成编号，如图所示：
![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1079991-20190530-1559216493500)
创建文件并提交，执行`git commit`命令时注意添加"fix #1"，当备注信息中含有此字样的 commit 出现在组长仓库，仓库中编号为 #1 的 issue 就会自动关闭。
### 3、提PR & 检查合并PR
把修改从组员的仓库添加到组长的仓库需要用到 pull request 方法，简称 PR。

创建一个 PR 就是从甲分支向乙分支提一个请求，该请求中有一个或多个提交，对方觉得可以、没问题，就合并（merge) 这个请求，也就是把请求中所有提交的修改增加到乙分支上，整个过程简称 “提 PR”、“检查合并 PR”。提 PR 既可以在仓库内，也可以跨用户跨仓库。

提PR后会跳转到合并页面，但不要自己操作（虽然有权限）。
合并 PR 的方法有三种：

* Create a merge commit ：这种方式会在组长仓库的 master 分支上生成一个新的提交，且保留 PR 中的所有提交信息。这是一种常规操作，用得最多。

* Squash and merge ：压缩合并，它会把 PR 中的全部提交压缩成一个。此方法的优点就是让提交列表特别整洁。一个 PR 里有很多提交，每个提交都是很细小的改动，保留这些提交没什么意义，这种情况就使用此方法合并 PR。

* Rebase and merge ：这种方法不会生成新的提交，例如 PR 中有 6 个提交，用此方法合并后，组长仓库也会新增 6 个提交。注意，这些提交的版本号与组员的提交不同，此外完全一样。

**从 A 向 B 提 PR 后，在 PR 合并或关闭前，A 上所有新增的提交都会出现在 PR 里。**
### 4、同步主仓库
提 PR、合并 PR 只能在 GitHub 页面上操作。

作为组员，要时刻保持自己的 master 分支与组长的一致，以避免在下次提 PR 时出现冲突，该操作叫做 “同步主仓库”，组长的仓库就是主仓库。
	
	 git remote add [主机名] [主仓库的地址] # 增加一个关联主机
	 # 自己的仓库地址对应的主机名是 origin，主仓库的主机名通常定义为 up 或 upstream
	 git fetch [主机名] # 拉取主仓库的全部分支信息到本地仓库
	 git pull --rebase [主机名] [分支名] # 同步主仓库，需联网（fetch + rebase）
	 git rebase [主机名] # 同步主仓库，不联网
以上是在自己 Fork 的仓库里进行修改的过程。还有一种常用的方式，就是不用 Fork，直接克隆组长的仓库到本地，然后各自创建自己的分支，在自己的分支上进行修改提交，最后从自己的分支向 master 分支提 PR。方式不同，原理一样。
## Git tag 与 Github releases
### 1、Git 标签
阶段性发布版本或对重要节点性提交打记号可以使用Git标签。
#### 创建标签
Tags 通常在本地使用 git 命令创建后推送到 GitHub 上，与 issue 相同的一点，它也只存在于项目仓库内，Fork 或提 PR 都不会带上它。在多人协作项目中，通常由组长对主仓库设置 Tags，单人项目自然就是自己说了算。

创建标签是给具体的某次提交创建的，跟分支无关。
	
	 git tag [标签名] -m [备注信息] [提交版本号] # 创建标签
	 如果是给当前分支最新的提交创建标签的话，[提交版本号] 可以省略
#### 查看标签
	 git tag # 显示仓库中的全部标签列表
	 git show [标签名] # 查看标签详情
标签是在提交的基础上创建的，如果仓库的多个分支中都有这个提交版本，那么这些分支上就有关于这个提交的相同的标签。
#### 删除本地标签
	 git tag -d [标签名] # 删除本地标签，标签文件也会删除，位于仓库主目录的.git/refs/tags
#### 将本地标签推送到远程仓库
	git push origin [标签名] # 推送标签到远程仓库
	git push origin --tags # 本地有多个标签，都推送到远程仓库
#### 删除远程仓库标签
	git push origin :refs/tags/[标签名] # 删除远程仓库标签，标签名其实是文件名
	# 本地标签不会同步删除，需要手动执行删除命令
#### 签出版本
签出版本就是指定某个提交版本创建一个新的分支。
	
	git checkout [标签名] # 切换到之前的某个提交版本
	git checkout -b [新的分支名] # 将此提交版本固定到一个新分支上并切换到此分支
### 2、Github 的 releases
GitHub 的 releases 是 2013 年发布的新功能，旨在协助软件开发者分发新版本给用户。

当项目组织宣布发布一个软件产品的版本，发布过程就是一个将软件交付给最终用户的工作流。版本是具有修改日志和二进制文件的一类对象，它们提供了 Git 工作流之外的完整项目历史，它们也可以从存储库的主页上被访问。发布版 release 附带发布说明和下载软件或源代码的链接。按照许多 Git 项目的约定，发布版本与 Git 的标签 tag 绑定。您可以使用现有的标签，或者让 release 在发布时创建标签。这就是上面查看 GitHub 仓库中标签信息时出现的场景。

标签是 Git 中的概念，而 releases 则是 Github、码云等源码托管商所提供的更高层的概念。Git 本身是没有 releases 这个概念，只有 tag。两者之间的关系则是，release 基于 tag，为 tag 添加更丰富的信息，一般是编译好的文件。
