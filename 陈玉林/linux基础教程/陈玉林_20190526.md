[TOC]

# 15_linux日志系统

服务：rsyslog 

日志目录：/var/log

 常见日志文件及说明
 
| 日志名称           | 信息说明                                                     |
| ------------------ | ------------------------------------------------------------ |
| `alternatives.log` | 系统的更新替代信息                                           |
| `apport.log`       | 应用程序崩溃信息记录                                         |
| `apt/history.log`  | 使用 apt-get 安装卸载软件的信息记录                          |
| `apt/term.log`     | 使用 apt-get 时的具体操作                                    |
| `auth.log`         | 登录认证的 log 信息                                          |
| `boot.log`         | 系统启动时的日志信息                                         |
| `btmp`             | 记录所有失败启动信息                                         |
| `dmesg`            | 内核缓冲信息，在系统启动时，显示屏幕上的与硬件有关的信息     |
| `dpkg.log`         | 安装或 dpkg 命令清除软件包的日志                             |
| `kern.log`         | 内核产生的日志，有助于在定制内核时解决问题                   |
| `lastlog`          | 记录所有用户的最近信息。这不是一个 ASCII 文件，因此需要用 lastlog 命令查看内容 |
| `faillog`          | 用户登录失败信息。此外，错误登录命令也会记录在本文件中       |
| `wtmp`             | 包含登录信息。使用 wtmp 可以找出谁正在登陆进入系统，谁使用命令显示这个文件或信息等 |
| `syslog`           | 系统信息记录                                                 |

> tips: wtmp, lastlog不是文本文件，不能用cat等直接查看，一般使用last工具查看

## rsyslog

rsyslog（rocket-fast system for log， syslog的替代品）

配置文件：/etc/rsyslog.conf， /etc/rsyslog.d/50-default.conf

日志级别

| priority 取值 | 值   | 说明                                                         |
| ------------- | ---- | ------------------------------------------------------------ |
| `emerge`      | 0    | 发生严重事件，并有导致系统崩溃的潜在危险。报告软件或者硬件问题 |
| `alert`       | 1    | 严重错误消息，会导致程序关闭并可能影响其他程序               |
| `crit`        | 2    | 错误消息，可能会导致程序关闭的事件重                         |
| `err`         | 3    | 程序中存在错误的通告                                         |
| `warning`     | 4    | 程序中存在潜在问题的警告信息                                 |
| `notice`      | 5    | 程序运行中产生了值得注意的事件                               |
| `info`        | 6    | 关于程序当前状态的报告信息                                   |
| `debug`       | 7    | 编程人员或测试人员使用的调试信息                             |

## 日志文件转储

**logrotate**

一个日志文件管理工具。用来把旧的日志文件删除，然后创建新的日志文件。可以根据日志文件的大小，也可以根据其天数来切割日志、管理日志，这个过程又叫做“转储”。

logrotate 相关配置文件： /etc/logrotate.conf， /etc/logrotate.d/

