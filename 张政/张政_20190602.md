# “Linux 基础入门（新版）”实验报告
##  环境变量与文件查找
***
***
***
##  环境变量
### 变量
所谓变量就是计算机中用于记录一个值（不一定是数值，也可以是字符或字符串）的符号，而这些符号将用于不同的运算处理中。通常变量与值是一对一的关系，可以通过表达式读取它的值并赋值给其它变量，也可以直接指定数值赋值给任意变量。为了便于运算和处理，大部分的编程语言会区分变量的类型，用于分别记录数值、字符或者字符串等等数据类型。

使用 *declare* 命令创建一个变量名为 *tmp* 的变量：

    $ declare tmp
使用 "=" 号赋值运算符，将变量 *tmp* 赋值为 *shiyanlou*：

    $ tmp=shiyanlou
读取变量的值，使用 *echo* 命令和 "$" 符号：

    $ echo $tmp
通常我们会涉及到的变量类型有三种：
+ 当前 *Shell* 进程私有用户自定义变量，只在当前 *Shell* 中有效。
+ *Shell* 本身内建的变量。
+ 从自定义变量导出的环境变量。

用于打印环境变量的三个命令：
+ set：显示当前 *Shell* 所有变量，包括其内建环境变量，用户自定义变量及导出的环境变量。
+ env：显示与当前用户相关的环境变量，还可以让命令在指定环境中运行。
+ export：显示从 *Shell* 中导出成环境变量的变量，也能通过它将自定义变量导出为环境变量。

      $ temp=shiyanlou
      $ export temp_env=shiyanlou
      $ env|sort>env.txt
      $ export|sort>export.txt
      $ set|sort>set.txt

      $ vimdiff env.txt export.txt set.txt
上述操作将命令输出通过管道 "| "使用 *sort* 命令排序，再重定向到对象文本文件中。通过 *vimdiff* 比较文件内容。

Linux 变量可分为两类：

1. 永久的：需要修改配置文件，变量永久生效；

2. 临时的：使用 *export* 命令行声明即可，变量在关闭 *shell* 时失效。

*/etc/bashrc* 和 */etc/profile* ，它们分别存放的是 *shell* 变量和环境变量。 *.profile* 只对当前用户永久生效。而写在 */etc/profile* 里面的是对所有用户永久生效，因此添加一个永久生效的环境变量，只需要打开 */etc/profile*，在最后添加环境变量即可。

### 命令的查找路径与顺序
在 *Shell* 中输入一个命令，*Shell* 是通过环境变量 *PATH* 来进行搜索的。

查看 *PATH* 环境变量的内容：

    $ echo $PATH

### 添加自定义路径到“ PATH ”环境变量
**添加临时环境变量：**

    $ PATH=$PATH:/home/shiyanlou/mybin
**添加永久变量：**

*zsh* 的配置文件是 *.zshrc*，相应 *Bash* 的配置文件为 *.bashrc* 。

    $ echo "PATH=$PATH:/home/shiyanlou/mybin" >> .zshrc
上述命令中 ">>" 表示将标准输出以追加的方式重定向到一个文件中，注意前面用到的 ">" 是以覆盖的方式重定向到一个文件中。在指定文件不存在的情况下都会创建新的文件。

### 修改和删除已有变量
####  修改变量
变量的修改有以下几种方式：
1. ${变量名#匹配字串}：从头向后开始匹配，删除符合匹配字串的最短数据
2. ${变量名##匹配字串}：从头向后开始匹配，删除符合匹配字串的最长数据
3. ${变量名%匹配字串}：从尾向前开始匹配，删除符合匹配字串的最短数据
4. ${变量名%%匹配字串}：从尾向前开始匹配，删除符合匹配字串的最长数据
5. ${变量名/旧的字串/新的字串}：将符合旧字串的第一个字串替换为新的字串
6. ${变量名//旧的字串/新的字串}：将符合旧字串的全部字串替换为新的字串

####  删除变量
可以使用 *unset* 命令删除一个环境变量：

    $ unset temp
####  环境变量立即生效
在 *Shell* 中修改了一个配置脚本文件之后（比如 *zsh* 的配置文件 *home* 目录下的 *.zshrc*），每次都要退出终端重新打开甚至重启主机之后其才能生效，很是麻烦，我们可以使用 *source* 命令来让其立即生效，如：

    $ cd /home/shiyanlou
    $ source .zshrc
*source* 命令还有一个别名就是 "."，上面的命令如果替换成 "." 的方式就该是：

    $ . ./.zshrc
在使用 "." 的时候，需要注意与表示当前路径的 "." 区分开。

**注意第一个点后面有一个空格，而且后面的文件必须指定完整的绝对或相对路径名，*source* 则不需要。**

##  搜索文件
常用命令： *whereis*，*which*，*find* 和 *locate* 。

*whereis* 只能搜索二进制文件(-b)，*man* 帮助文件(-m)和源代码文件(-s)。

*locate* 通过 "/var/lib/mlocate/mlocate.db" 数据库查找，不过这个数据库也不是实时更新的，系统会使用定时任务每天自动执行 *updatedb* 命令更新一次，因此刚添加的文件可能会找不到，需要手动执行一次 *updatedb* 命令

*which* 本身是 *Shell* 内建的一个命令， *which* 通常用来确定是否安装了某个指定的软件，因为它只从 *PATH* 环境变量指定的路径中去搜索命令。

*find* 不但可以通过文件类型、文件名进行查找而且可以根据文件的属性（如文件的时间戳，文件的权限等）进行搜索。

*$ sudo find [path] [option] [action] *

与时间相关的命令参数：

+ -atime：最后访问时间
+ -ctime：最后修改文件内容的时间
+ -mtime：最后修改文件属性的时间
下面以 "-mtime" 参数举例：

+ -mtime n：n 为数字，表示为在 n 天之前的“一天之内”修改过的文件
+ -mtime +n：列出在 n 天之前（不包含 n 天本身）被修改过的文件
+ -mtime -n：列出在 n 天之内（包含 n 天本身）被修改过的文件
+ -newer file：file 为一个已存在的文件，列出比 file 还要新的文件名

# 一起去看流星雨
    $ sudo apt-get update; sudo apt-get install cmatrix
